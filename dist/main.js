(()=>{"use strict";class e{}function t(e,t,l){let c=document.querySelector("#task"),r=document.querySelector("#due-date"),o=document.querySelector(".to-do-add");e.remove(),n(e),o.style.display="flex",c.value=t,r.value=l}function n(e){const t=document.querySelector(".project-title").innerText;let n=e.querySelector(".description").innerText,l=JSON.parse(localStorage.getItem(t));l.forEach((e=>{for(let t in e)if(t===n){let t=l.findIndex((t=>t===e));l.splice(t,1)}})),e.remove(),l=JSON.stringify(l),localStorage.setItem(t,l)}function l(e){let l=document.querySelector(".tasks-container"),c=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div"),d=document.createElement("div"),a=document.createElement("div"),u=document.createElement("div"),i=document.createElement("input");i.type="checkbox",i.name="status",i.id="status",i.addEventListener("click",(()=>function(){const e=document.querySelector(".project-title").innerText;document.querySelectorAll(".task").forEach((t=>{const n=t.querySelector(".description").innerText;let l=t.querySelector("#status").checked,c=JSON.parse(localStorage.getItem(e));c.forEach((e=>{for(let t in e)t===n&&(e[t].status=l)})),c=JSON.stringify(c),localStorage.setItem(e,c)}))}())),c.classList.add("task"),r.classList.add("description"),o.classList.add("due"),d.classList.add("btns"),function(){let t=null;for(let n in e)r.innerText=n,t=e[n];console.log(t),o.innerText=t.due,i.checked=t.status}(),a.classList.add("delete"),a.innerText="Delete",a.addEventListener("click",(()=>n(c))),u.classList.add("edit"),u.innerText="Edit",u.addEventListener("click",(()=>{t(c,r.innerText,o.innerText)})),d.append(u,a),c.append(i,r,o,d),l.append(c)}let c={},r=document.querySelector(".project-title");function o(e){let t=document.querySelector(".new-project"),n=document.querySelector(".add-new"),l=document.querySelector("#project"),c=document.querySelector(".projects"),r=document.createElement("div");void 0===e&&(e=l.value);let o=e.replace(/\s/gi,"-");r.classList.add("title"),r.id=o,r.innerText=e,c.append(r),t.style.display="none",l.value="",n.style.display="flex"}window[`${r.innerText}Array`]=[];let d=document.querySelector("#task"),a=document.querySelector("#due-date");function u(){document.querySelectorAll(".delete").forEach((e=>e.addEventListener("click",(()=>n()))))}function i(){document.querySelector(".projects").querySelectorAll(".title").forEach((e=>{e.addEventListener("click",(()=>{let t=document.querySelector(".tasks-container"),n=document.querySelector(".to-do-add"),c=document.querySelector(".project-title"),r=document.querySelector(".new-task-btn"),o=document.querySelector(".delete-project-btn");t.innerHTML="",n.style.display="none",c.innerText=e.innerText,r.style.display="flex",o.style.display="flex",function(){let e=document.querySelector(".project-title").innerText,t=Object.keys(localStorage),n=[];t.forEach((t=>{t==e&&n.push(JSON.parse(localStorage.getItem(t)))})),n.forEach((e=>{e.forEach((e=>l(e)))}))}(),u()}))}))}document.querySelector(".submit").addEventListener("click",(()=>{""===d.value||""===a.value?alert("Please complete all input fields."):function(){let t=document.querySelector(".project-title").innerText,n=JSON.parse(localStorage.getItem(t));const o=new e;let d=document.querySelector("#task"),a=document.querySelector("#due-date");o[d.value]={due:a.value,status:!1},c[r.innerText]=null;for(let e in c)if(e==r.innerText){if(null==window[`${e}Array`]){let e=r.innerText;window[`${e}Array`]=[]}return null==n&&(n=[]),n.push(o),l(o),u()}function u(){c[r.innerText]=window[`${r.innerText}Array`];let e=JSON.stringify(n);localStorage.setItem(r.innerText,e),d.value="",a.value=""}}()})),document.querySelector("#clear").addEventListener("click",(()=>{d.value="",a.value=""})),document.querySelectorAll(".task").forEach((e=>{let l=e.querySelector(".description").innerText,c=e.querySelector(".due").innerText;e.querySelector(".edit").addEventListener("click",(()=>{t(e,l,c),n(l)}))})),function(){let e=document.querySelector(".to-do-add"),t=document.querySelector(".new-task-btn");t.addEventListener("click",(()=>{e.style.display="flex",t.style.display="none"}))}(),document.querySelectorAll("#status").forEach((e=>e.addEventListener("click",(()=>t())))),function(){let e=document.querySelector(".new-project"),t=document.querySelector(".add-new");t.addEventListener("click",(()=>{e.style.display="flex",t.style.display="none"})),document.querySelector(".project-exit").addEventListener("click",(()=>{e.style.display="none",t.style.display="flex"})),document.querySelector(".project-submit").addEventListener("click",(()=>{o(),i()}))}(),u(),document.querySelectorAll(".delete-project-btn").forEach((e=>e.addEventListener("click",(()=>function(){let e=document.querySelector(".tasks-container"),t=document.querySelector(".project-title"),n=t.innerText;document.querySelector(`#${n}`).remove(),e.innerHTML="",t.innerHTML="",localStorage.removeItem(n)}())))),function(){let e=Object.keys(localStorage),t=[];e.forEach((e=>t.push(JSON.parse(localStorage.getItem(e))))),localStorage.clear(),console.log(e),t.forEach((n=>{let l=t.findIndex((e=>e===n)),c=e[l];if(0===n.length){let e=t.findIndex((e=>0===e.length));t.splice(e,1)}const r=JSON.stringify(n);localStorage.setItem(c,r)}))}(),document.querySelector(".exit").addEventListener("click",(()=>function(){let t=document.querySelector(".new-task-btn"),n=document.querySelector(".to-do-add"),c=document.querySelector("#task"),r=document.querySelector("#due-date");const o=new e;o[c.value]={due:r.value,status:!1},n.style.display="none",t.style.display="flex",l(o)}())),localStorage.length>0&&function(){let e=document.querySelector(".project-title"),t=document.querySelector(".new-task-btn"),n=document.querySelector(".delete-project-btn"),c=Object.keys(localStorage),r=[],d=Math.floor(Math.random()*c.length);e.innerText=c[d],t.style.display="flex",n.style.display="flex",c.forEach((t=>{t==e.innerText&&r.push(JSON.parse(localStorage.getItem(t))),o(t)})),r.forEach((e=>{e.length>0&&(console.log("Hi"),e.forEach((e=>l(e))))}))}(),i()})();