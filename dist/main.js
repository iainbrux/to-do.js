(()=>{"use strict";class e{}function t(e){let t=document.querySelector(".new-project"),n=document.querySelector(".add-new"),c=document.querySelector("#project"),l=document.querySelector(".projects"),r=document.createElement("div");void 0===e&&(e=c.value);let o=e.replace(/\s/gi,"-");r.classList.add("title"),r.id=o,r.innerText=e,l.append(r),t.style.display="none",c.value="",n.style.display="flex"}function n(e){let t=e.innerText;document.querySelector(".project-title").innerText=t,document.querySelector(".tasks-container").innerHTML="",db.collection("projects").doc(t).collection("tasks").get().then((e=>{e.forEach((e=>{let t=e.data();!function(e,t,n){let o=document.querySelector(".tasks-container"),d=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),u=document.createElement("div"),m=document.createElement("div"),y=document.createElement("input");y.type="checkbox",y.name="status",y.id="status",y.addEventListener("click",(()=>l())),d.classList.add("task"),a.classList.add("description"),i.classList.add("due"),s.classList.add("btns"),a.innerText=e,i.innerText=t,y.checked=n,u.classList.add("delete"),u.innerText="Delete",u.addEventListener("click",(()=>r(d))),m.classList.add("edit"),m.innerText="Edit",m.addEventListener("click",(()=>{c(d,a.innerText,i.innerText)})),s.append(m,u),d.append(y,a,i,s),o.append(d)}(t.task,t.due,t.status)}))}))}function c(e,t,n){let c=document.querySelector("#task"),l=document.querySelector("#due-date"),o=document.querySelector(".to-do-add");e.remove(),r(e),o.style.display="flex",c.value=t,l.value=n}function l(){const e=document.querySelector(".project-title").innerText;document.querySelectorAll(".task").forEach((t=>{const n=t.querySelector(".description").innerText;let c=t.querySelector("#status").checked,l=JSON.parse(localStorage.getItem(e));l.forEach((e=>{for(let t in e)t===n&&(e[t].status=c)})),l=JSON.stringify(l),localStorage.setItem(e,l)}))}function r(e){const t=document.querySelector(".project-title").innerText;let n=e.querySelector(".description").innerText,c=JSON.parse(localStorage.getItem(t));c.forEach((e=>{for(let t in e)if(t===n){let t=c.findIndex((t=>t===e));c.splice(t,1)}})),e.remove(),c=JSON.stringify(c),localStorage.setItem(t,c)}function o(){let e=document.querySelector(".project-title"),t=document.querySelector(".tasks-container");[document.querySelector(".projects"),e,t].forEach((e=>e.innerHTML=""))}function d(e){let t=document.querySelector(".tasks-container"),n=document.createElement("div"),o=document.createElement("div"),d=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),u=document.createElement("input");u.type="checkbox",u.name="status",u.id="status",u.addEventListener("click",(()=>l())),n.classList.add("task"),o.classList.add("description"),d.classList.add("due"),a.classList.add("btns");let m=null;for(let t in e)o.innerText=t,m=e[t];d.innerText=m.due,u.checked=m.status,i.classList.add("delete"),i.innerText="Delete",i.addEventListener("click",(()=>r(n))),s.classList.add("edit"),s.innerText="Edit",s.addEventListener("click",(()=>{c(n,o.innerText,d.innerText)})),a.append(s,i),n.append(u,o,d,a),t.append(n)}let a={},i=document.querySelector(".project-title");window[`${i.innerText}Array`]=[];let s=!1,u=!0;!function(){const e=document.querySelector(".localstorage"),c=document.querySelector(".firebase");e.addEventListener("click",(()=>{e.classList.add("disabledbtn"),c.classList.remove("disabledbtn"),s=!1,u=!0,console.log(`Cloud Status: ${s}.`),console.log(`Local Status: ${u}.`),o(),function(){let e=document.querySelector(".project-title"),n=document.querySelector(".new-task-btn"),c=document.querySelector(".delete-project-btn"),l=Object.keys(localStorage),r=[],o=Math.floor(Math.random()*l.length);e.innerText=l[o],n.style.display="flex",c.style.display="flex",l.forEach((n=>{n==e.innerText&&r.push(JSON.parse(localStorage.getItem(n))),t(n)})),r.forEach((e=>{e.length>0&&e.forEach((e=>d(e)))})),document.querySelectorAll(".title").forEach((e=>{e.addEventListener("click",(()=>{document.querySelector(".tasks-container").innerHTML="",r=[],l.forEach((t=>{t==e.innerText&&r.push(JSON.parse(localStorage.getItem(t)))})),r.forEach((e=>{e.length>0&&e.forEach((e=>d(e)))}))}))}))}()})),c.addEventListener("click",(()=>{e.classList.remove("disabledbtn"),c.classList.add("disabledbtn"),u=!1,s=!0,console.log(`Cloud Status: ${s}.`),console.log(`Local Status: ${u}.`),o(),function(){let e=document.querySelector(".project-title"),c=(document.querySelector(".new-task-btn"),document.querySelector(".delete-project-btn"),{names:[]});db.collection("projects").doc("project names").get().then((e=>{e.data().names.forEach((e=>c.names.push(e)))})).then((()=>{c.names.forEach((e=>t(e)))})).then((()=>{let t=Math.floor(Math.random()*c.names.length);e.innerText=c.names[t]})).then((()=>{n(e)})).then((()=>{document.querySelectorAll(".title").forEach((e=>{e.addEventListener("click",(()=>n(e)))}))}))}()}))}();let m=document.querySelector("#task"),y=document.querySelector("#due-date");function S(){document.querySelectorAll(".delete").forEach((e=>e.addEventListener("click",(()=>r()))))}document.querySelector("#clear").addEventListener("click",(()=>{m.value="",y.value=""})),document.querySelectorAll(".task").forEach((e=>{let t=e.querySelector(".description").innerText,n=e.querySelector(".due").innerText;e.querySelector(".edit").addEventListener("click",(()=>{c(e,t,n),r(t)}))})),function(){let e=document.querySelector(".to-do-add"),t=document.querySelector(".new-task-btn");t.addEventListener("click",(()=>{e.style.display="flex",t.style.display="none"}))}(),document.querySelectorAll("#status").forEach((e=>e.addEventListener("click",(()=>l())))),function(){let e=document.querySelector(".new-project"),n=document.querySelector("#project"),c=document.querySelector(".add-new");c.addEventListener("click",(()=>{e.style.display="flex",c.style.display="none"})),document.querySelector(".project-exit").addEventListener("click",(()=>{e.style.display="none",c.style.display="flex"})),document.querySelector(".project-submit").addEventListener("click",(()=>{s?function(e){let t=document.querySelector(".new-project"),n=document.querySelector(".add-new"),c=document.querySelector("#project"),l=document.querySelector(".projects"),r=document.createElement("div");r.classList.add("title"),r.innerText=e,l.append(r),t.style.display="none",c.value="",n.style.display="flex"}(n.value):u?t():alert("Please enter a project name")}))}(),S(),document.querySelectorAll(".delete-project-btn").forEach((e=>e.addEventListener("click",(()=>function(){let e=document.querySelector(".tasks-container"),t=document.querySelector(".project-title"),n=t.innerText;document.querySelector(`#${n}`).remove(),e.innerHTML="",t.innerHTML="",localStorage.removeItem(n)}())))),function(){let e=Object.keys(localStorage),t=[];e.forEach((e=>t.push(JSON.parse(localStorage.getItem(e))))),localStorage.clear(),t.forEach((n=>{let c=t.findIndex((e=>e===n)),l=e[c];if(0===n.length){let e=t.findIndex((e=>0===e.length));t.splice(e,1)}const r=JSON.stringify(n);localStorage.setItem(l,r)}))}(),document.querySelector(".exit").addEventListener("click",(()=>function(){let t=document.querySelector(".new-task-btn"),n=document.querySelector(".to-do-add"),c=document.querySelector("#task"),l=document.querySelector("#due-date");const r=new e;r[c.value]={due:l.value,status:!1},n.style.display="none",t.style.display="flex",d(r)}())),document.querySelector(".projects").querySelectorAll(".title").forEach((e=>{e.addEventListener("click",(()=>{!function(e){let t=document.querySelector(".tasks-container"),n=document.querySelector(".to-do-add"),c=document.querySelector(".project-title"),l=document.querySelector(".new-task-btn"),r=document.querySelector(".delete-project-btn");t.innerHTML="",n.style.display="none",c.innerText=e.innerText,l.style.display="flex",r.style.display="flex";let o=document.querySelector(".project-title").innerText,a=Object.keys(localStorage),i=[];a.forEach((e=>{e==o&&i.push(JSON.parse(localStorage.getItem(e)))})),i.forEach((e=>{e.forEach((e=>d(e)))}))}(e),S()}))})),document.querySelector(".submit").addEventListener("click",(()=>{""===m.value||""===y.value?alert("Please complete all input fields."):function(){let t=document.querySelector(".project-title").innerText,n=JSON.parse(localStorage.getItem(t));const c=new e;let l=document.querySelector("#task"),r=document.querySelector("#due-date");c[l.value]={due:r.value,status:!1},a[i.innerText]=null;for(let e in a)if(e==i.innerText){if(null==window[`${e}Array`]){let e=i.innerText;window[`${e}Array`]=[]}return null==n&&(n=[]),n.push(c),d(c),o()}function o(){a[i.innerText]=window[`${i.innerText}Array`];let e=JSON.stringify(n);localStorage.setItem(i.innerText,e),l.value="",r.value=""}}()}))})();