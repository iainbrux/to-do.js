(()=>{"use strict";class e{}function t(e,t,n){let l=document.querySelector("#task"),r=document.querySelector("#due-date"),c=document.querySelector(".to-do-add");e.remove(),c.style.display="flex",l.value=t,r.value=n}function n(e){let n=document.querySelector(".tasks-container"),l=document.querySelector(".project-title").innerText,r=document.createElement("div"),c=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),i=document.createElement("div"),u=document.createElement("input");u.type="checkbox",u.name="status",u.id="status",u.addEventListener("click",(()=>function(e){document.querySelector(".project-title").innerText,document.querySelectorAll(".task").forEach((e=>{e.querySelector(".description").innerText,e.querySelector(".due").innerText,e.querySelector("#status").addEventListener("click",(()=>{}))}));let t=Object.keys(localStorage),n=[];t.forEach((e=>{n.push(JSON.parse(localStorage.getItem(e)))})),n.forEach((t=>{let l=t.name,r=n.find((e=>e.name===l)),c=e.checked;r.status=c;let o=JSON.stringify(t);localStorage.setItem(l,o)}))}(u))),r.classList.add("task"),c.classList.add("description"),o.classList.add("due"),a.classList.add("btns"),function(){let t=null;for(let n in e)c.innerText=n,t=e[n];console.log(t),o.innerText=t.due,u.checked=t.status}(),d.classList.add("delete"),d.innerText="Delete",d.addEventListener("click",(()=>{r.remove();let e=JSON.parse(localStorage[l]);console.log("This is test:"+e)})),i.classList.add("edit"),i.innerText="Edit",i.addEventListener("click",(()=>t(r,c.innerText,o.innerText))),a.append(i,d),r.append(u,c,o,a),n.append(r)}let l={},r=document.querySelector(".project-title");function c(e){let t=document.querySelector(".new-project"),n=document.querySelector(".add-new"),l=document.querySelector("#project"),r=document.querySelector(".projects"),c=document.createElement("div");void 0===e&&(e=l.value);let o=e.replace(/\s/gi,"-");c.classList.add("title"),c.id=o,c.innerText=e,r.append(c),t.style.display="none",l.value="",n.style.display="flex"}window[`${r.innerText}Array`]=[];let o=document.querySelector("#task"),a=document.querySelector("#due-date");function d(){let e=document.querySelectorAll(".task"),t=document.querySelector(".project-title").innerText;e.forEach((e=>{let n=e.querySelector(".description").innerText,l=e.querySelector(".due").innerText;e.querySelector(".delete").addEventListener("click",(()=>{let r=JSON.parse(localStorage.getItem([t]));r.forEach((e=>{for(let t in e)if(t===n&&e[t].due===l){let e=r.findIndex((e=>e[t].due===l));r.splice(e,1)}})),r=JSON.stringify(r),localStorage.setItem(t,r),console.log(localStorage),e.remove()}))}))}function i(){document.querySelector(".projects").querySelectorAll(".title").forEach((e=>{e.addEventListener("click",(()=>{let t=document.querySelector(".tasks-container"),l=document.querySelector(".to-do-add"),r=document.querySelector(".project-title"),c=document.querySelector(".new-task-btn");t.innerHTML="",l.style.display="none",r.innerText=e.innerText,c.style.display="flex",function(){let e=document.querySelector(".project-title").innerText,t=Object.keys(localStorage),l=[];t.forEach((t=>{t==e&&l.push(JSON.parse(localStorage.getItem(t)))})),l.forEach((e=>{e.forEach((e=>n(e)))}))}(),d()}))}))}document.querySelector(".submit").addEventListener("click",(()=>{""===o.value||""===a.value?alert("Please complete all input fields."):function(){let t=document.querySelector(".project-title").innerText,c=JSON.parse(localStorage.getItem(t));const o=new e;let a=document.querySelector("#task"),d=document.querySelector("#due-date");o[a.value]={due:d.value,status:!1},l[r.innerText]=null;for(let e in l)if(e==r.innerText){if(null==window[`${e}Array`]){let e=r.innerText;window[`${e}Array`]=[]}return null==c&&(c=[]),c.push(o),n(o),i()}function i(){l[r.innerText]=window[`${r.innerText}Array`];let e=JSON.stringify(c);localStorage.setItem(r.innerText,e),a.value="",d.value=""}}()})),document.querySelector("#clear").addEventListener("click",(()=>{o.value="",a.value=""})),document.querySelectorAll(".task").forEach((e=>{let n=e.querySelector(".description").innerText,l=e.querySelector(".due").innerText;e.querySelector(".edit").addEventListener("click",(()=>t(e,n,l)))})),function(){let e=document.querySelector(".to-do-add"),t=document.querySelector(".new-task-btn");t.addEventListener("click",(()=>{e.style.display="flex",t.style.display="none"}))}(),function(){let e=document.querySelector(".new-task-btn"),t=document.querySelector(".to-do-add");document.querySelector(".exit").addEventListener("click",(()=>{t.style.display="none",e.style.display="flex"}))}(),document.querySelectorAll("#status").forEach((e=>{e.addEventListener("click",(function(){let t=Object.keys(localStorage),n=[];t.forEach((e=>{n.push(JSON.parse(localStorage.getItem(e)))})),n.forEach((t=>{let l=t.name,r=n.find((e=>e.name===l)),c=e.checked;r.status=c;let o=JSON.stringify(t);localStorage.setItem(l,o)}))}))})),function(){let e=document.querySelector(".new-project"),t=document.querySelector(".add-new");t.addEventListener("click",(()=>{e.style.display="flex",t.style.display="none"})),document.querySelector(".project-exit").addEventListener("click",(()=>{e.style.display="none",t.style.display="flex"})),document.querySelector(".project-submit").addEventListener("click",(()=>{c(),i()}))}(),localStorage.length>0&&function(){let e=document.querySelector(".project-title"),t=document.querySelector(".new-task-btn"),l=Object.keys(localStorage),r=[],o=Math.floor(Math.random()*l.length);e.innerText=l[o],t.style.display="flex",l.forEach((t=>{t==e.innerText&&r.push(JSON.parse(localStorage.getItem(t))),c(t)})),r.forEach((e=>{e.forEach((e=>n(e)))}))}(),i(),d()})();