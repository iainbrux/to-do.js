(()=>{"use strict";class e{}function t(e,t,l){let n=document.querySelector("#task"),o=document.querySelector("#due-date"),c=document.querySelector(".to-do-add");e.remove(),c.style.display="flex",n.value=t,o.value=l}function l(){let e=document.querySelectorAll(".task"),t=document.querySelector(".project-title").innerText;e.forEach((e=>{let l=e.querySelector(".description").innerText,n=e.querySelector(".due").innerText,o=JSON.parse(localStorage.getItem(t));o.forEach((e=>{for(let t in e)if(t===l){let e=o.findIndex((e=>e[t].due===n));o.splice(e,1),console.log(e)}})),o=JSON.stringify(o),localStorage.setItem(t,o),console.log(localStorage),e.remove()}))}function n(e){let n=document.querySelector(".tasks-container"),o=(document.querySelector(".project-title").innerText,document.createElement("div")),c=document.createElement("div"),r=document.createElement("div"),d=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),u=document.createElement("input");u.type="checkbox",u.name="status",u.id="status",u.addEventListener("click",(()=>function(){const e=document.querySelector(".project-title").innerText;document.querySelectorAll(".task").forEach((t=>{const l=t.querySelector(".description").innerText;let n=t.querySelector("#status").checked;console.log(n);let o=JSON.parse(localStorage.getItem(e));o.forEach((e=>{for(let t in e)t===l&&(e[t].status=n)})),o=JSON.stringify(o),localStorage.setItem(e,o),console.log(localStorage)}))}())),o.classList.add("task"),c.classList.add("description"),r.classList.add("due"),d.classList.add("btns"),function(){let t=null;for(let l in e)c.innerText=l,t=e[l];console.log(t),r.innerText=t.due,u.checked=t.status}(),a.classList.add("delete"),a.innerText="Delete",a.addEventListener("click",(()=>l())),i.classList.add("edit"),i.innerText="Edit",i.addEventListener("click",(()=>t(o,c.innerText,r.innerText))),d.append(i,a),o.append(u,c,r,d),n.append(o)}let o={},c=document.querySelector(".project-title");function r(e){let t=document.querySelector(".new-project"),l=document.querySelector(".add-new"),n=document.querySelector("#project"),o=document.querySelector(".projects"),c=document.createElement("div");void 0===e&&(e=n.value);let r=e.replace(/\s/gi,"-");c.classList.add("title"),c.id=r,c.innerText=e,o.append(c),t.style.display="none",n.value="",l.style.display="flex"}window[`${c.innerText}Array`]=[];let d=document.querySelector("#task"),a=document.querySelector("#due-date");function i(){document.querySelectorAll(".delete").forEach((e=>e.addEventListener("click",(()=>l()))))}function u(){document.querySelector(".projects").querySelectorAll(".title").forEach((e=>{e.addEventListener("click",(()=>{let t=document.querySelector(".tasks-container"),l=document.querySelector(".to-do-add"),o=document.querySelector(".project-title"),c=document.querySelector(".new-task-btn"),r=document.querySelector(".delete-project-btn");t.innerHTML="",l.style.display="none",o.innerText=e.innerText,c.style.display="flex",r.style.display="flex",function(){let e=document.querySelector(".project-title").innerText,t=Object.keys(localStorage),l=[];t.forEach((t=>{t==e&&l.push(JSON.parse(localStorage.getItem(t)))})),l.forEach((e=>{e.forEach((e=>n(e)))}))}(),i()}))}))}document.querySelector(".submit").addEventListener("click",(()=>{""===d.value||""===a.value?alert("Please complete all input fields."):function(){let t=document.querySelector(".project-title").innerText,l=JSON.parse(localStorage.getItem(t));const r=new e;let d=document.querySelector("#task"),a=document.querySelector("#due-date");r[d.value]={due:a.value,status:!1},o[c.innerText]=null;for(let e in o)if(e==c.innerText){if(null==window[`${e}Array`]){let e=c.innerText;window[`${e}Array`]=[]}return null==l&&(l=[]),l.push(r),n(r),i()}function i(){o[c.innerText]=window[`${c.innerText}Array`];let e=JSON.stringify(l);localStorage.setItem(c.innerText,e),d.value="",a.value=""}}()})),document.querySelector("#clear").addEventListener("click",(()=>{d.value="",a.value=""})),document.querySelectorAll(".task").forEach((e=>{let l=e.querySelector(".description").innerText,n=e.querySelector(".due").innerText;e.querySelector(".edit").addEventListener("click",(()=>t(e,l,n)))})),function(){let e=document.querySelector(".to-do-add"),t=document.querySelector(".new-task-btn");t.addEventListener("click",(()=>{e.style.display="flex",t.style.display="none"}))}(),function(){let e=document.querySelector(".new-task-btn"),t=document.querySelector(".delete-project-btn"),n=document.querySelector(".to-do-add");document.querySelector(".exit").addEventListener("click",(()=>{n.style.display="none",e.style.display="flex",t.style.display="flex",l()}))}(),document.querySelectorAll("#status").forEach((e=>{e.addEventListener("click",t())})),function(){let e=document.querySelector(".new-project"),t=document.querySelector(".add-new");t.addEventListener("click",(()=>{e.style.display="flex",t.style.display="none"})),document.querySelector(".project-exit").addEventListener("click",(()=>{e.style.display="none",t.style.display="flex"})),document.querySelector(".project-submit").addEventListener("click",(()=>{r(),u()}))}(),i(),document.querySelectorAll(".delete-project-btn").forEach((e=>e.addEventListener("click",(()=>function(){let e=document.querySelector(".tasks-container"),t=document.querySelector(".project-title"),l=t.innerText;document.querySelector(`#${l}`).remove(),e.innerHTML="",t.innerHTML="",localStorage.removeItem(l)}())))),function(){let e=Object.keys(localStorage),t=[];e.forEach((e=>t.push(JSON.parse(localStorage.getItem(e))))),localStorage.clear(),console.log(e),t.forEach((l=>{let n=t.findIndex((e=>e===l)),o=e[n];if(0===l.length){let e=t.findIndex((e=>0===e.length));t.splice(e,1)}const c=JSON.stringify(l);localStorage.setItem(o,c)}))}(),localStorage.length>0&&function(){let e=document.querySelector(".project-title"),t=document.querySelector(".new-task-btn"),l=document.querySelector(".delete-project-btn"),o=Object.keys(localStorage),c=[],d=Math.floor(Math.random()*o.length);e.innerText=o[d],t.style.display="flex",l.style.display="flex",o.forEach((t=>{t==e.innerText&&c.push(JSON.parse(localStorage.getItem(t))),r(t)})),c.forEach((e=>{e.length>0&&(console.log("Hi"),e.forEach((e=>n(e))))}))}(),u()})();